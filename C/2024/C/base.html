<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Les bases :: Cours langage C</title>
    <meta name="generator" content="Antora 3.1.7">
    <link rel="stylesheet" href="../../../_/css/site.css">
<link rel="stylesheet" href="../../../_/css/extra.css">
<link rel="stylesheet" href="../../../_/css/lastmodify.css">

  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../..">Cours langage C</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="C" data-version="2024">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Programmation système en C</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Le langage C</span>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="base.html">Les bases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="fonctions.html">Fonctions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="tableaux.html">Tableaux</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pointeurs.html">Pointeurs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="strings.html">Chaînes de caractères</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="mainfunc.html">Fonction main</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="bibliotheque.html">Organisation du code</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="fichiers.html">Fichiers de données</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="alloc.html">Allocation de mémoire</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="types.html">Complément sur les types</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="preproc.html">Le préprocesseur</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="typeinterpret.html">Interprétation des types</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ptrfunc.html">Pointeurs de fonctions</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Programmation système</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../sys/sig.html">Signaux Unix</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../sys/proc.html">Processus</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../sys/thread.html">Multi-threading</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Programmation système en C</span>
    <span class="version">2024</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Programmation système en C</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="../index.html">2024</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Programmation système en C</a></li>
    <li>Le langage C</li>
    <li><a href="base.html">Les bases</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///home/jaclin/antora_components/C/starts/github/modules/C/pages/base.adoc">Edit this Page</a></div>
</div>
<div class="lastmodify"> modifié le <span id="lastmodify"/> </div>
  <div class="content">
<article class="doc">
<h1 class="page">Les bases</h1>
<div class="sect1">
<h2 id="exemple"><a class="anchor" href="#exemple"></a>1. Structure d’un programme C</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">/* exemple de programme élémentaire */ <i class="conum" data-value="1"></i><b>(1)</b>

#include &lt;stdio.h&gt;	<i class="conum" data-value="2"></i><b>(2)</b>

// fonction principale <i class="conum" data-value="3"></i><b>(3)</b>
int main()	<i class="conum" data-value="4"></i><b>(4)</b>
{
  printf("Hello World !") ;	// écrire sur la sortie standard <i class="conum" data-value="5"></i><b>(5)</b>
  return 0 ;	              // 0 signifie OK <i class="conum" data-value="6"></i><b>(6)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>format <em>historique</em> des commentaires</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>directive préprocesseur visant à déclarer la fonction <code>printf</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>autre forme de commentaire</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>main</code> est le point d&#8217;entrée de tout programme C</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>appel à la fonction <code>printf</code> de la bibliothèque standard C (<code>libc</code>)</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>terminaison de l&#8217;exécution et renvoi d&#8217;un code de retour à l&#8217;OS</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>La commande unix <code>man</code> permet d&#8217;obtenir des explications sur l&#8217;utilisation d&#8217;une fonction C,
par exemple pour <code>printf</code> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ man 3 printf</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="compilation"><a class="anchor" href="#compilation"></a>2. Compiler un programme</h2>
<div class="sectionbody">
<div class="paragraph">
<p>On compile le programme avec la commande <code>cc</code> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ cc -Wall -o prog prog.c</code></pre>
</div>
</div>
<div class="paragraph">
<p>ou en plus simple :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ make prog</code></pre>
</div>
</div>
<div class="paragraph">
<p>On exécute ensuite le programme :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ ./prog                   # exécute prog</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Pour obtenir des explications sur l&#8217;utilisation de la commande <code>cc</code>, faire :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ man cc</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Récupérer le code de retour d&#8217;une exécution avec la variable shell <code>$?</code> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ ./prog
$ echo $?</code></pre>
</div>
</div>
<div class="paragraph">
<p>Utiliser le code de retour comme une condition :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ ./prog &amp;&amp; echo "l'exécution s'est bien passée"
$ ./prog || echo "fin anormale, le programme a renvoyé $?"</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="structcontr"><a class="anchor" href="#structcontr"></a>3. Structures de contrôle</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_instruction_itérative_for"><a class="anchor" href="#_instruction_itérative_for"></a>3.1. Instruction itérative for</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">// calcule 1+2+3+ ... +n avec for

#include &lt;stdio.h&gt;

int main()
{
  int S=0, i, n ;

  scanf("%d",&amp;n) ;

  for (i=1 ; i&lt;=n ; i++)
    S += i ;

  printf("S=%d\n",S) ;
  return 0 ;
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_instruction_itérative_while"><a class="anchor" href="#_instruction_itérative_while"></a>3.2. Instruction itérative while</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">/* même chose avec while */

i = 1 ;
while (i&lt;=n)
{
  S += i ;
  i++ ;
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_instruction_itérative_do_while"><a class="anchor" href="#_instruction_itérative_do_while"></a>3.3. Instruction itérative do while</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">/* même chose avec do while */

i = 0 ;
do {
     i++ ;
     S += i ;
} while (i&lt;=n) ;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_instruction_conditionnelle_if"><a class="anchor" href="#_instruction_conditionnelle_if"></a>3.4. Instruction conditionnelle if</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">#include &lt;stdio.h&gt;
#include &lt;math.h&gt;	// pour déclarer sqrt

#define PR "premier"

int main()
{
  int i=2, n ;

  printf("entrez un entier &gt;2 : ") ;
  scanf("%d",&amp;n) ;

  while (n%i!=0 &amp;&amp; i&lt;=sqrt(n)) i++ ;

  if (n%i!=0)
    printf("%d est %s\n",n,PR) ;
  else
    printf("%d n'est pas %s\n",n,PR) ;

  return 0 ;
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_instruction_alternative_switch"><a class="anchor" href="#_instruction_alternative_switch"></a>3.5. Instruction alternative switch</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">char rep ;
int oui, non ;
switch(rep)
{
	case 'o':
	case 'O': oui=1 ; non=0 ; break ;
	case 'n':
	case 'N': oui=0 ; non=1 ; break ;
	default : oui=non=0 ;
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="types"><a class="anchor" href="#types"></a>4. Types scalaires prédéfinis</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Les types entiers</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">char  ̶ short  ̶ int  ̶ long  ̶ long long</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Les types réels</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">float  ̶ double  ̶ long double</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="operateurs"><a class="anchor" href="#operateurs"></a>5. Opérateurs</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">opérateurs arithmétiques</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">+ - * / % ++ -- += -= *= /= %=</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">opérateur conditionnel</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">min = a&lt;b ? a : b ;
abs = x&lt;0 ? -x : x ;</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">opérateurs de manipulation de bits</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">int i=11, j=5, k ;

k = i &amp; j ;
k = i | j ;
k = i ^ j ;
unsigned char b=7, l ;
l = ~b ;

l = b &lt;&lt; 1 ;
l = b &gt;&gt; 2 ;</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">cast</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">int a=1, b=2 ;
float x ;

x = a/b ;	/* div entière, x:0.0 */
x = (float) a/b ;	/* div réelle 1.0/2, x:0.5 */
x = a/(float)b ;	/* div réelle 1/2.0, x:0.5 */
x = (float) (a/b) ;	/* div entière, x:0.0 */</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="iofunc"><a class="anchor" href="#iofunc"></a>6. Quelques fonctions d&#8217;E/S</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>scanf  ̶ printf  ̶ fgets  ̶ fputs</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="makefile"><a class="anchor" href="#makefile"></a>7. Automatiser les compilations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>La commande <code>make</code> permet de lancer les compilations suivant un ensemble de règles définies dans un fichier <code>makefile</code> ou <code>Makefile</code> situé dans le répertoire courant.</p>
</div>
<div class="listingblock">
<div class="title">fichier Makefile</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">%: %.c                             <i class="conum" data-value="1"></i><b>(1)</b>
&lt;tabulation&gt; gcc -Wall -o $@ $@.c  <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>ceci est une règle de dépendance qui signifie :
tout binaire dépend du fichier <code>.c</code> de même nom.
A gauche du signe <code>:</code>, on a la cible, et à droite, ses dépendances</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>ceci est une action pour mettre à jour la cible</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>L&#8217;ensemble forme un bloc qui signifie :
"tout binaire dépend du fichier <code>.c</code> de même nom, et  s&#8217;obtient avec la commande <code>gcc</code> indiquée".</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>il peut y avoir autant de ligne d&#8217;action que l&#8217;on veut</p>
</li>
<li>
<p>la règle de dépendance et les lignes d&#8217;action doivent se suivre, sans ligne vide</p>
</li>
<li>
<p>une ligne de dépendance commence en colonne 1</p>
</li>
<li>
<p>une ligne d&#8217;action commence par une tabulation</p>
</li>
<li>
<p>on peut mettre autant de bloc que l&#8217;on veut dans un fichier <code>Makefile</code></p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Ce <code>Makefile</code> permet de compiler tout programme <code>prog.c</code>
avec la commande <code>make prog</code>.
Il est possible d&#8217;ajouter des exceptions pour les programmes qui ne se compilent
pas avec la commande indiquée :</p>
</div>
<div class="listingblock">
<div class="title">fichier Makefile</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs"># règle implicite
%: %.c
    gcc -Wall -o $@ $@.c    <i class="conum" data-value="1"></i><b>(1)</b>

# règles spécifiques
premier: premier.c
    gcc -Wall -o $@ $@.c -lm</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>$@</code> représente la cible des dépendances (donc ici l&#8217;exécutable)</td>
</tr>
</table>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p class="center">
  <span style="font-size: 0.9em;">
  Jacquelin Charbonnel
  &nbsp; &mdash; &nbsp; 
  Support publié sous licence Creative Commons BY-NC-ND 
  2017-2025
  &nbsp; &mdash; &nbsp; 
  motorisé avec Antora
  </span>
  </p>
</footer>

<script>
var myDate = new Date(document.lastModified);
myNewDate = new Intl.DateTimeFormat(
            undefined,
            {year: "numeric", month: "long", day: "numeric", hour: "2-digit", minute: "2-digit"}
        )
        .format(myDate).replace(/\./g, '-');
document.getElementById("lastmodify").innerHTML = myNewDate ;
</script>

<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
