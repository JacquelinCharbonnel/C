<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Le préprocesseur :: Cours langage C</title>
    <meta name="generator" content="Antora 3.1.7">
    <link rel="stylesheet" href="../../../_/css/site.css">
<link rel="stylesheet" href="../../../_/css/extra.css">
<link rel="stylesheet" href="../../../_/css/lastmodify.css">

  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../..">Cours langage C</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="C" data-version="2024">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Programmation en C</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Le langage C</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="base.html">Les bases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="fonctions.html">Fonctions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="tableaux.html">Tableaux</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pointeurs.html">Pointeurs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="strings.html">Chaînes de caractères</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="mainfunc.html">Fonction main</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="bibliotheque.html">Organisation du code</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="fichiers.html">Fichiers de données</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="alloc.html">Allocation de mémoire</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="types.html">Complément sur les types</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="preproc.html">Le préprocesseur</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="typeinterpret.html">Interprétation des types</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ptrfunc.html">Pointeurs de fonctions</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Programmation système</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../sys/sig.html">Signaux Unix</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../sys/proc.html">Processus</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../sys/thread.html">Multi-threading</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Programmation en C</span>
    <span class="version">2024</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Programmation en C</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="../index.html">2024</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Programmation en C</a></li>
    <li>Le langage C</li>
    <li><a href="preproc.html">Le préprocesseur</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///home/jaclin/antora_components/C/starts/github/modules/C/pages/preproc.adoc">Edit this Page</a></div>
</div>
<div class="lastmodify"> modifié le <span id="lastmodify"/> </div>
  <div class="content">
<article class="doc">
<h1 class="page">Le préprocesseur</h1>
<div class="sect1">
<h2 id="_fonctionnement"><a class="anchor" href="#_fonctionnement"></a>1. Fonctionnement</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Le préprocesseur intervient en premier dans la phase de compilation.
Son objectif est de transformer le fichier source en un autre fichier source, qui sera traité par le compilateur.
Le préprocesseur est piloté par les directives (les lignes commançant par <code>#</code>) parsemée dans le fichier.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Le préprocesseur ne connait pas la syntaxe du langage C.
Il interprète seulement les lignes commençant par <code>#</code>
pour réaliser des manipulation de texte  (inclusion de fichier sources, substitution de caractères, etc.).
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Exemple</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">#include &lt;stdio.h&gt;

** mon fichier à moi **

#define FLAG
#define N bonjour
#define M N tout le monde

N M

#define MAX(x,y) x&gt;y ? x : y

int i,j,k ;
k = MAX(i,j) ;

#if defined(FLAG)
  "le symbole FLAG étant défini, cette portion est insérée"
#else
  "le symbole FLAG n'étant pas défini, cette portion #else est insérée"
#endif

#if F==1
  "F vaut 1"
#else
  "F ne vaut pas 1, mais" F
#endif

#ifdef WINDOWS
    /* Code source pour Windows */
#endif

#ifdef LINUX
    /* Code source pour Linux */
#endif

#ifdef MAC
    /* Code source pour Mac */
#endif</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="assert"><a class="anchor" href="#assert"></a>2. La macro assert</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">#include &lt;assert.h&gt;

int main()
{
  float x,y ;

  scanf("%f",&amp;x) ;

  /*
     bla bla bla
     bla bla bla
  */

  /* La racine carrée d'un nombre négatif n'existe pas.
     Pour se prémunir de ses propres bugs,
     on peut contrôler l'argument passé à sqrt :
  */
  assert(x&gt;=0) ;
  y = sqrt(x) ;

  /* Quand le code sera au point, on insérer en début de mon programme la ligne :
     #define NDEBUG
  */

  /*
     bla bla bla
     bla bla bla
  */
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="compil"><a class="anchor" href="#compil"></a>3. Définir une macro à la compilation</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ cc -DLINUX ... <i class="conum" data-value="1"></i><b>(1)</b>
$ cc -DF=0 ...   <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>équivalent à <code>#define LINUX</code> en début de programme</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>équivalent à <code>#define F 0</code> en début de programme</td>
</tr>
</table>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p class="center">
  <span style="font-size: 0.9em;">
  Jacquelin Charbonnel
  &nbsp; &mdash; &nbsp; 
  Support publié sous licence Creative Commons BY-NC-ND 
  2017-2025
  &nbsp; &mdash; &nbsp; 
  motorisé avec Antora
  </span>
  </p>
</footer>

<script>
var myDate = new Date(document.lastModified);
myNewDate = new Intl.DateTimeFormat(
            undefined,
            {year: "numeric", month: "long", day: "numeric", hour: "2-digit", minute: "2-digit"}
        )
        .format(myDate).replace(/\./g, '-');
document.getElementById("lastmodify").innerHTML = myNewDate ;
</script>

<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
